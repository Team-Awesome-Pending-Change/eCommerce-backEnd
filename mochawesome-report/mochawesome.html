<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:7,&quot;tests&quot;:17,&quot;passes&quot;:4,&quot;pending&quot;:0,&quot;failures&quot;:13,&quot;start&quot;:&quot;2023-07-25T19:17:11.762Z&quot;,&quot;end&quot;:&quot;2023-07-25T19:17:11.860Z&quot;,&quot;duration&quot;:98,&quot;testsRegistered&quot;:17,&quot;passPercent&quot;:23.52941176470588,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;74da1dec-a5fd-4f73-82c4-37d1d5c42bc6&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9b0cc0e4-78ee-4f97-8adb-406d3d15a5d3&quot;,&quot;title&quot;:&quot;CardController&quot;,&quot;fullFile&quot;:&quot;/Users/haydenjamescooper/projects/courses/code-401/eCommerce-backEnd/tests/CardController.test.js&quot;,&quot;file&quot;:&quot;/tests/CardController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7bfd8bdb-eb7c-4907-9c9b-b0958568457d&quot;,&quot;title&quot;:&quot;GET /api/cards&quot;,&quot;fullFile&quot;:&quot;/Users/haydenjamescooper/projects/courses/code-401/eCommerce-backEnd/tests/CardController.test.js&quot;,&quot;file&quot;:&quot;/tests/CardController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all cards&quot;,&quot;fullTitle&quot;:&quot;CardController GET /api/cards should get all cards&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Stub Card.find to return the test card\nsinon.stub(Card, &#x27;find&#x27;).returns([testCard]);\nconst response = await request(app).get(&#x27;/api/cards&#x27;);\nexpect(response.status).to.equal(200);\nexpect(response.body).to.be.an(&#x27;array&#x27;);\nexpect(response.body).to.have.lengthOf(1);\nexpect(response.body[0].id).to.equal(testCard.id);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: testCard is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: testCard is not defined\n    at Context.&lt;anonymous&gt; (tests/CardController.test.js:14:41)\n    at process.processImmediate (node:internal/timers:475:21)&quot;},&quot;uuid&quot;:&quot;ba3b9b49-c7dc-4790-8bf4-35c9acca9003&quot;,&quot;parentUUID&quot;:&quot;7bfd8bdb-eb7c-4907-9c9b-b0958568457d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;ba3b9b49-c7dc-4790-8bf4-35c9acca9003&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f046bf2d-2cba-4b4f-b836-163fcce709be&quot;,&quot;title&quot;:&quot;GET /api/cards/:id&quot;,&quot;fullFile&quot;:&quot;/Users/haydenjamescooper/projects/courses/code-401/eCommerce-backEnd/tests/CardController.test.js&quot;,&quot;file&quot;:&quot;/tests/CardController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a card by id&quot;,&quot;fullTitle&quot;:&quot;CardController GET /api/cards/:id should get a card by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testCardId = &#x27;TestCardID&#x27;;\n// Stub Card.findOne to return the test card\nsinon.stub(Card, &#x27;findOne&#x27;).resolves(testCard);\nconst response = await request(app).get(`/api/cards/${testCardId}`);\nexpect(response.status).to.equal(200);\nexpect(response.body).to.be.an(&#x27;object&#x27;);\nexpect(response.body.id).to.equal(testCard.id);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: testCard is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: testCard is not defined\n    at Context.&lt;anonymous&gt; (tests/CardController.test.js:28:44)\n    at process.processImmediate (node:internal/timers:475:21)&quot;},&quot;uuid&quot;:&quot;a1e548b5-ac2f-48cd-a830-7979236340d6&quot;,&quot;parentUUID&quot;:&quot;f046bf2d-2cba-4b4f-b836-163fcce709be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if card with given id is not found&quot;,&quot;fullTitle&quot;:&quot;CardController GET /api/cards/:id should return 404 if card with given id is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const nonExistentCardId = &#x27;NonExistentCardID&#x27;;\n// Stub Card.findOne to return null to simulate card not found\nsinon.stub(Card, &#x27;findOne&#x27;).resolves(null);\nconst response = await request(app).get(`/api/cards/${nonExistentCardId}`);\nexpect(response.status).to.equal(404);\nexpect(response.body).to.be.an(&#x27;object&#x27;);\nexpect(response.body.message).to.equal(&#x27;Card not found.&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Attempted to wrap findOne which is already wrapped&quot;,&quot;estack&quot;:&quot;TypeError: Attempted to wrap findOne which is already wrapped\n    at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:67:21)\n    at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:132:13)\n    at Function.stub (node_modules/sinon/lib/sinon/stub.js:130:44)\n    at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n    at Context.&lt;anonymous&gt; (tests/CardController.test.js:39:13)\n    at process.processImmediate (node:internal/timers:475:21)\n--------------\nError: Stack Trace for original\n    at extendObjectWithWrappedMethods (node_modules/sinon/lib/sinon/util/core/wrap-method.js:173:34)\n    at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:161:5)\n    at Function.stub (node_modules/sinon/lib/sinon/stub.js:130:44)\n    at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n    at Context.&lt;anonymous&gt; (tests/CardController.test.js:28:13)\n    at process.processImmediate (node:internal/timers:475:21)&quot;},&quot;uuid&quot;:&quot;77cd1da4-6ed4-4166-807d-fbb437b7936b&quot;,&quot;parentUUID&quot;:&quot;f046bf2d-2cba-4b4f-b836-163fcce709be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;a1e548b5-ac2f-48cd-a830-7979236340d6&quot;,&quot;77cd1da4-6ed4-4166-807d-fbb437b7936b&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;44612a45-6140-44c6-b5e1-852d18bb138f&quot;,&quot;title&quot;:&quot;CartController&quot;,&quot;fullFile&quot;:&quot;/Users/haydenjamescooper/projects/courses/code-401/eCommerce-backEnd/tests/CartController.test.js&quot;,&quot;file&quot;:&quot;/tests/CartController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all carts&quot;,&quot;fullTitle&quot;:&quot;CartController should get all carts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/carts&#x27;)\n  .expect(200)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    expect(res.body).to.be.an(&#x27;array&#x27;); // Expect the response to be an array\n    done();\n  });&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;&#x27; to be an array&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;&#x27; to be an array\n    at Test.&lt;anonymous&gt; (tests/CartController.test.js:46:32)\n    at Test.assert (node_modules/supertest/lib/test.js:172:8)\n    at Server.localAssert (node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:626:28)\n    at Server.emit (node:events:512:28)\n    at emitCloseNT (node:net:2132:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)&quot;},&quot;uuid&quot;:&quot;dbe49d6b-e80e-4487-8675-8968b73993d8&quot;,&quot;parentUUID&quot;:&quot;44612a45-6140-44c6-b5e1-852d18bb138f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add a new cart&quot;,&quot;fullTitle&quot;:&quot;CartController should add a new cart&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const cartData = { name: &#x27;New Card&#x27; };\nrequest(app)\n  .post(&#x27;/carts&#x27;)\n  .send(cartData)\n  .expect(200)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    expect(res.body).to.have.property(&#x27;_id&#x27;); // Expect the response to have &#x27;_id&#x27; property\n    done();\n  });&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: expected 200 \&quot;OK\&quot;, got 500 \&quot;Internal Server Error\&quot;&quot;,&quot;estack&quot;:&quot;Error: expected 200 \&quot;OK\&quot;, got 500 \&quot;Internal Server Error\&quot;\n    at Context.&lt;anonymous&gt; (tests/CartController.test.js:56:8)\n    at process.processImmediate (node:internal/timers:475:21)\n----\n    at Test._assertStatus (node_modules/supertest/lib/test.js:252:14)\n    at /Users/haydenjamescooper/projects/courses/code-401/eCommerce-backEnd/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:626:28)\n    at Server.emit (node:events:512:28)\n    at emitCloseNT (node:net:2132:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)&quot;},&quot;uuid&quot;:&quot;20343fce-a394-4cfe-9cb5-b8eb829ba877&quot;,&quot;parentUUID&quot;:&quot;44612a45-6140-44c6-b5e1-852d18bb138f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a cart by id&quot;,&quot;fullTitle&quot;:&quot;CartController should get a cart by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = &#x27;test-id&#x27;;\nrequest(app)\n  .get(`/carts/${id}`)\n  .expect(200)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    expect(res.body).to.have.property(&#x27;_id&#x27;, id); // Expect the response to have &#x27;_id&#x27; property with the provided id\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49e84649-4752-4f06-9dc4-808f7123bd3c&quot;,&quot;parentUUID&quot;:&quot;44612a45-6140-44c6-b5e1-852d18bb138f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a cart&quot;,&quot;fullTitle&quot;:&quot;CartController should update a cart&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = &#x27;test-id&#x27;;\nconst cartData = { name: &#x27;Updated Card&#x27; };\nrequest(app)\n  .put(`/carts/${id}`)\n  .send(cartData)\n  .expect(200)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    expect(res.body).to.have.property(&#x27;_id&#x27;, id); // Expect the response to have &#x27;_id&#x27; property with the provided id\n    expect(res.body).to.have.property(&#x27;name&#x27;, &#x27;Updated Card&#x27;); // Expect the response to have updated &#x27;name&#x27;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7047417f-60c9-4b0b-a20e-97dd73f034f7&quot;,&quot;parentUUID&quot;:&quot;44612a45-6140-44c6-b5e1-852d18bb138f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a cart&quot;,&quot;fullTitle&quot;:&quot;CartController should delete a cart&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = &#x27;test-id&#x27;;\nrequest(app)\n  .delete(`/carts/${id}`)\n  .expect(200)\n  .end((err, res) =&gt; {\n    if (err) return done(err);\n    expect(res.body).to.have.property(&#x27;_id&#x27;, id); // Expect the response to have &#x27;_id&#x27; property with the provided id\n    expect(res.body).to.have.property(&#x27;name&#x27;, &#x27;Deleted Card&#x27;); // Expect the response to indicate a deleted card\n    done();\n  });&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (message) } to have property &#x27;_id&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (message) } to have property &#x27;_id&#x27;\n    at Test.&lt;anonymous&gt; (tests/CartController.test.js:98:34)\n    at Test.assert (node_modules/supertest/lib/test.js:172:8)\n    at Server.localAssert (node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:626:28)\n    at Server.emit (node:events:512:28)\n    at emitCloseNT (node:net:2132:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)&quot;},&quot;uuid&quot;:&quot;aa6a0c2c-de58-44af-acd2-d437c0a2d38f&quot;,&quot;parentUUID&quot;:&quot;44612a45-6140-44c6-b5e1-852d18bb138f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;49e84649-4752-4f06-9dc4-808f7123bd3c&quot;,&quot;7047417f-60c9-4b0b-a20e-97dd73f034f7&quot;],&quot;failures&quot;:[&quot;dbe49d6b-e80e-4487-8675-8968b73993d8&quot;,&quot;20343fce-a394-4cfe-9cb5-b8eb829ba877&quot;,&quot;aa6a0c2c-de58-44af-acd2-d437c0a2d38f&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:51,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bceaa938-5f3d-49a4-8441-308157c02778&quot;,&quot;title&quot;:&quot;OrderController&quot;,&quot;fullFile&quot;:&quot;/Users/haydenjamescooper/projects/courses/code-401/eCommerce-backEnd/tests/OrderController.test.js&quot;,&quot;file&quot;:&quot;/tests/OrderController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;OrderController \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  // Create a test order to be used in the tests\n  testOrder = await Order.create({\n    address: &#x27;Test Address&#x27;,\n    amount: 50,\n    userId: &#x27;TestUserID&#x27;,\n  });\n} catch (error) {\n  console.error(error);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e77f01a-47df-45f6-a009-47aff6c0af89&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;OrderController \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Clean up the database after all tests are done\nawait Order.deleteMany({});\napp.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f70ae8e-f8d5-46f8-8427-779e7f611568&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;OrderController \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8e08ede-5e92-425c-ab77-41fb52da813e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6c1d32cf-8828-4f9f-84cb-af48e9d4e473&quot;,&quot;title&quot;:&quot;ProductController&quot;,&quot;fullFile&quot;:&quot;/Users/haydenjamescooper/projects/courses/code-401/eCommerce-backEnd/tests/ProductController.test.js&quot;,&quot;file&quot;:&quot;/tests/ProductController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all products&quot;,&quot;fullTitle&quot;:&quot;ProductController should get all products&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await request(server).get(&#x27;/products&#x27;);\nexpect(response.status).toBe(200);\nexpect(Array.isArray(response.body)).toBe(true);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: expect is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: expect is not defined\n    at Context.&lt;anonymous&gt; (tests/ProductController.test.js:7:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)&quot;},&quot;uuid&quot;:&quot;3a80dbe4-a74e-4622-a2dc-f8076e124437&quot;,&quot;parentUUID&quot;:&quot;6c1d32cf-8828-4f9f-84cb-af48e9d4e473&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a product by id&quot;,&quot;fullTitle&quot;:&quot;ProductController should get a product by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const productId = &#x27;example-product-id&#x27;;\nconst response = await request(server).get(`/products/${productId}`);\nexpect(response.status).toBe(200);\nexpect(response.body._id).toBe(productId);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: expect is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: expect is not defined\n    at Context.&lt;anonymous&gt; (tests/ProductController.test.js:14:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)&quot;},&quot;uuid&quot;:&quot;f12ac239-4d84-46f1-9d99-4f70f64ac77d&quot;,&quot;parentUUID&quot;:&quot;6c1d32cf-8828-4f9f-84cb-af48e9d4e473&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;3a80dbe4-a74e-4622-a2dc-f8076e124437&quot;,&quot;f12ac239-4d84-46f1-9d99-4f70f64ac77d&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b1954360-2cae-4662-b20d-f894bdebbb82&quot;,&quot;title&quot;:&quot;TCGPlayerController&quot;,&quot;fullFile&quot;:&quot;/Users/haydenjamescooper/projects/courses/code-401/eCommerce-backEnd/tests/TCGPlayerController.test.js&quot;,&quot;file&quot;:&quot;/tests/TCGPlayerController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should generate a token&quot;,&quot;fullTitle&quot;:&quot;TCGPlayerController should generate a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await request(server).post(&#x27;/generate-token&#x27;);\nexpect(response.status).toBe(200);\nexpect(response.body).toHaveProperty(&#x27;access_token&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: expect is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: expect is not defined\n    at Context.&lt;anonymous&gt; (tests/TCGPlayerController.test.js:7:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)&quot;},&quot;uuid&quot;:&quot;d082dfae-cc0d-4661-a4be-32ce4d1d7e3a&quot;,&quot;parentUUID&quot;:&quot;b1954360-2cae-4662-b20d-f894bdebbb82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;d082dfae-cc0d-4661-a4be-32ce4d1d7e3a&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;21a7bb11-2d06-421e-86fe-696116f54bcc&quot;,&quot;title&quot;:&quot;Custom Middleware&quot;,&quot;fullFile&quot;:&quot;/Users/haydenjamescooper/projects/courses/code-401/eCommerce-backEnd/tests/middleware.test.js&quot;,&quot;file&quot;:&quot;/tests/middleware.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Custom Middleware\&quot;&quot;,&quot;fullTitle&quot;:&quot;Custom Middleware \&quot;before all\&quot; hook in \&quot;Custom Middleware\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;app = express();\n// Apply custom middleware to the app\napplyCustomMiddleware(app);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22c99e8d-f4d8-4eae-91cf-b7c3a37c7f46&quot;,&quot;parentUUID&quot;:&quot;21a7bb11-2d06-421e-86fe-696116f54bcc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set up logger middleware&quot;,&quot;fullTitle&quot;:&quot;Custom Middleware should set up logger middleware&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create a test route to check if the logger middleware is working\napp.get(&#x27;/test-logger&#x27;, (req, res) =&gt; {\n  res.send(&#x27;Test Logger Middleware&#x27;);\n});\nconst response = await request(app).get(&#x27;/test-logger&#x27;);\nexpect(response.status).to.equal(200);\nexpect(response.text).to.equal(&#x27;Test Logger Middleware&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b70a9000-3013-4d28-a2ea-84493065baa8&quot;,&quot;parentUUID&quot;:&quot;21a7bb11-2d06-421e-86fe-696116f54bcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set up static middleware&quot;,&quot;fullTitle&quot;:&quot;Custom Middleware should set up static middleware&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create a test route to check if the static middleware is working\nconst staticFilePath = path.join(__dirname, &#x27;../public/test.html&#x27;);\napp.get(&#x27;/test-static&#x27;, (req, res) =&gt; {\n  res.sendFile(staticFilePath);\n});\nconst response = await request(app).get(&#x27;/test-static&#x27;);\nexpect(response.status).to.equal(200);\nexpect(response.type).to.equal(&#x27;text/html&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;ReferenceError: path is not defined&quot;,&quot;estack&quot;:&quot;ReferenceError: path is not defined\n    at Context.&lt;anonymous&gt; (tests/middleware.test.js:28:28)\n    at process.processImmediate (node:internal/timers:475:21)&quot;},&quot;uuid&quot;:&quot;18244549-e387-44fe-bb63-7515448c5e35&quot;,&quot;parentUUID&quot;:&quot;21a7bb11-2d06-421e-86fe-696116f54bcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set up express.json middleware&quot;,&quot;fullTitle&quot;:&quot;Custom Middleware should set up express.json middleware&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create a test route to check if the express.json middleware is working\napp.post(&#x27;/test-json&#x27;, (req, res) =&gt; {\n  res.json(req.body);\n});\nconst data = { message: &#x27;Hello, World!&#x27; };\nconst response = await request(app).post(&#x27;/test-json&#x27;).send(data);\nexpect(response.status).to.equal(200);\nexpect(response.body).to.deep.equal(data);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d7fccd5-dd7b-4366-9668-048fea00a303&quot;,&quot;parentUUID&quot;:&quot;21a7bb11-2d06-421e-86fe-696116f54bcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set up cors middleware&quot;,&quot;fullTitle&quot;:&quot;Custom Middleware should set up cors middleware&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create a test route to check if the cors middleware is working\napp.get(&#x27;/test-cors&#x27;, (req, res) =&gt; {\n  res.send(&#x27;Test CORS Middleware&#x27;);\n});\nconst response = await request(app).get(&#x27;/test-cors&#x27;);\nexpect(response.status).to.equal(200);\nexpect(response.text).to.equal(&#x27;Test CORS Middleware&#x27;);\nexpect(response.header[&#x27;access-control-allow-origin&#x27;]).to.equal(&#x27;http://localhost:3000&#x27;);\nexpect(response.header[&#x27;access-control-allow-methods&#x27;]).to.equal(&#x27;GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS&#x27;);\nexpect(response.header[&#x27;access-control-allow-headers&#x27;]).to.equal(&#x27;Content-Type, Authorization&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected undefined to equal &#x27;http://localhost:3000&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected undefined to equal &#x27;http://localhost:3000&#x27;\n    at Context.&lt;anonymous&gt; (tests/middleware.test.js:59:63)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)&quot;},&quot;uuid&quot;:&quot;c1852bab-f0a1-48ec-ae56-fd0ee3a4d531&quot;,&quot;parentUUID&quot;:&quot;21a7bb11-2d06-421e-86fe-696116f54bcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set up error handling middleware for ValidationError&quot;,&quot;fullTitle&quot;:&quot;Custom Middleware should set up error handling middleware for ValidationError&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create a test route that throws a ValidationError\napp.get(&#x27;/test-validation-error&#x27;, (req, res, next) =&gt; {\n  const err = new Error(&#x27;Test Validation Error&#x27;);\n  err.name = &#x27;ValidationError&#x27;;\n  next(err);\n});\nconst response = await request(app).get(&#x27;/test-validation-error&#x27;);\nexpect(response.status).to.equal(400);\nexpect(response.body.message).to.equal(&#x27;Test Validation Error&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 500 to equal 400&quot;,&quot;estack&quot;:&quot;AssertionError: expected 500 to equal 400\n    at Context.&lt;anonymous&gt; (tests/middleware.test.js:73:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)&quot;,&quot;diff&quot;:&quot;- 500\n+ 400\n&quot;},&quot;uuid&quot;:&quot;332f2864-2e49-4388-b1c2-a63595c8d839&quot;,&quot;parentUUID&quot;:&quot;21a7bb11-2d06-421e-86fe-696116f54bcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set up error handling middleware for MongoError&quot;,&quot;fullTitle&quot;:&quot;Custom Middleware should set up error handling middleware for MongoError&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create a test route that throws a MongoError\napp.get(&#x27;/test-mongo-error&#x27;, (req, res, next) =&gt; {\n  const err = new Error(&#x27;Test Mongo Error&#x27;);\n  err.name = &#x27;MongoError&#x27;;\n  next(err);\n});\nconst response = await request(app).get(&#x27;/test-mongo-error&#x27;);\nexpect(response.status).to.equal(400);\nexpect(response.body.message).to.equal(&#x27;There was a problem with the database operation&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 500 to equal 400&quot;,&quot;estack&quot;:&quot;AssertionError: expected 500 to equal 400\n    at Context.&lt;anonymous&gt; (tests/middleware.test.js:86:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)&quot;,&quot;diff&quot;:&quot;- 500\n+ 400\n&quot;},&quot;uuid&quot;:&quot;b45f0de2-5d38-46df-98ff-1a8d578055c0&quot;,&quot;parentUUID&quot;:&quot;21a7bb11-2d06-421e-86fe-696116f54bcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b70a9000-3013-4d28-a2ea-84493065baa8&quot;,&quot;1d7fccd5-dd7b-4366-9668-048fea00a303&quot;],&quot;failures&quot;:[&quot;18244549-e387-44fe-bb63-7515448c5e35&quot;,&quot;c1852bab-f0a1-48ec-ae56-fd0ee3a4d531&quot;,&quot;332f2864-2e49-4388-b1c2-a63595c8d839&quot;,&quot;b45f0de2-5d38-46df-98ff-1a8d578055c0&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;eCommerce-backEnd&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/Users/haydenjamescooper/projects/courses/code-401/eCommerce-backEnd/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/Users/haydenjamescooper/projects/courses/code-401/eCommerce-backEnd/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>